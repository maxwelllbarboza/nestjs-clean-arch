# **API User**

API de User √© uma API RESTful desenvolvida com NestJS que implementa funcionalidades essenciais de um e-commerce, incluindo autentica√ß√£o JWT, gest√£o de produtos, categorias, usu√°rios e um sistema de carrinho de compras.

---

# **Arquitetura**

## üöÄ Tecnologias Utilizadas

- **Ambiente de Nuvem da plataforma Railway**
- **Banco de dados PostgreSQL 15.12**
- **Linguagens Node.js e Typescript**
- **Docker (opcional, para rodar o banco de dados)**
- **Protocolo REST sobre HTTPS**
- **Postman v11.36.3, para testes de API**

## üöÄ Frameworks

- **Nest 10.1.11, para back end**
- **Class-validator 0.14.1, para valida√ß√£o de dados**
- **Class-transformer 0.5.1**
- **Swagger 7.4.2, para documenta√ß√£o da API**
- **nestjs/jwt 11.0.0, para seguran√ßa**
- **Prisma ORM 6.4.1, para persist√™ncia de dados**
- **Jest 29.5.0, para testes unit√°rios**

---

# **Estrutura do projeto**

O projeto est√° estruturado conforme representado abaixo:

```
collection
src
    |_ modules
        |_ configs
            |_ database
            |_ filters
                |_ exceptions
            |_ interceptors
                |_ logs
                |_ responses
            |_ security
                |_ bycript
                |_ jwt
            |_ message.ts

        |_ usecases
            |_ auth
            |_ carts
            |_ categories
            |_ orders
            |_ products
            |_ users


```

## Pacote usecases

O pacote "usecases" cont√©m os casos de uso da aplica√ß√£o, ou seja, o c√≥digo que corresponde os servi√ßos que atendem por dom√≠nios espec√≠ficos do neg√≥cio:

- auth: C√≥digo que trata da autentica√ß√£o dos usu√°rios do e-commerce;
- carts: C√≥digo que trata dos carrinhos de compra dos usu√°rios;
- categories: C√≥digo que trata das categorias de produtos;
- orders: C√≥digo que trata das compras realizadas pelos usu√°rios;
- products: C√≥digo que trata dos produtos comercializados no e-commerce;
- users: C√≥digo que trata dos usu√°rios do e-commerce.

## Pacote configs

O pacote "configs" cont√©m todo c√≥digo comum ao projeto, sendo compartilhado entre todos os casos de uso, tal como c√≥digo de infraestrutura e seguran√ßa:

- database: C√≥digo que trata da conex√£o com o banco de dados em todas as opera√ß√µes da aplica√ß√£o;
- filters: C√≥digo de todos os filters utilizados na aplica√ß√£o;
- interceptor: C√≥digo de todos os interceptors utilizados na aplica√ß√£o;
- security: C√≥digo de todos os mecanismos de seguran√ßa da aplica√ß√£o;
- message.ts: Arquivo com mensagens de retorno padr√£o da aplica√ß√£o.

## Pacote collection

- collection: Testes funcionais da aplica√ß√£o, que podem ser acionados a partir do Postman.


---


# **Camadas da Aplica√ß√£o**

Os casos de uso s√£o organizados em camadas que, em conjunto com os Design Patters detalhados mais adiante, apoiam na utiliza√ß√£o de boas pr√°ticas de desenvolvimento, tal como os princ√≠pios do SOLID. Esta aplica√ß√£o est√° utilizando as seguintes camadas:

- **Domain:** Camada de neg√≥cios e persist√™ncia, respons√°vel pela representa√ß√£o do dom√≠nio de neg√≥cio e persist√™ncia dos dados, nela se encontram os patterns DTO, Entity e Repository;

- **Service:** Camada de servi√ßos da aplica√ß√£o, respons√°vel pela comunica√ß√£o entre a camada ‚ÄúController‚Äù e a camada ‚ÄúDomain‚Äù. Nela encontra-se o pattern Service.

- **Controller:** Camada de controle da aplica√ß√£o, respons√°vel pelo recebimento das requisi√ß√µes e intera√ß√£o com as demais camadas da aplica√ß√£o para produzir a resposta final.

A divis√£o em camadas e os patterns utilizados auxiliam na utiliza√ß√£o dos princ√≠pios do SOLID:

- **Single Responsability:** Cada classe implementada realizando apenas uma miss√£o, ou seja, com uma √∫nica responsabilidade;

- **Open-Closed Principle:** Objetos ou entidades devem ser abertos para extens√£o, por√©m fechados para modifica√ß√£o. Extendendo e n√£o alterando o c√≥digo para novos comportamentos.

- **Liskov Substitution Principle:** Cada classe derivada deve ser substitu√≠vel por sua classe base, evitando criar depend√™ncias com especializa√ß√µes.

- **Interface Segregation Principle:** Cada classe n√£o pode ser obrigada a implementar interfaces e/ou m√©todos que n√£o ir√° utilizar, sendo melhor criar interfaces para fins espec√≠ficos.

- **Dependency Inversion Principle:** √â melhor depender de abstra√ß√µes e n√£o de implementa√ß√µes espec√≠ficas, pois isso gera desacoplamento¬†de¬†c√≥digo.

---

# **Filters e Interceptors**

A aplica√ß√£o utiliza alguns patterns para realizar tratamentos padronizados e facilitar a manuten√ß√£o do c√≥digo, conforme abaixo:

- Filter para Exceptions: Este filter captura e trata de forma adequada e padronizada todas as exceptions lan√ßadas durante a execu√ß√£o do c√≥digo, tanto provenientes de regras de neg√≥cio quanto erros n√£o tratados. O objetivo √© garantir o log padronizado de todas as exceptions e tamb√©m um retorno padr√£o para o usu√°rio da aplica√ß√£o.

- Interceptors de Requests e Responses: Captura o fluxo de execu√ß√£o, garantido tratamento padronizado do request/response e permitindo fazer log detalhado. Essa t√©cnica √© muito √∫til para troubleshooting, permitindo a coleta de informa√ß√£o para desvendar erros e bugs mais complexos. O log detalhado pode ser ligado e desligado de acordo com o n√≠vel (debug, info, etc.). Permite ainda criar mecanismos de seguran√ßa, tais como impedir SQL injection (por√©m, n√£o foi implementado).

---

# **Design Patterns**

- **DTO:** O Data Transient Object √© um pattern utilizado para transportar os dados dados entre as camadas da aplica√ß√£o e, nesta aplica√ß√£o, √© usado tamb√©m para comportar as annotations de valida√ß√£o de dados na entrada (input);
- **Presenter:** Pattern utilizado para transporte de dados na camada mais externa da aplica√ß√£o que levar√° os dados at√© o requisitante. Ou seja, √© o pattern para transporte de dados na resposta (output).

- **Service:** Representa um servi√ßo interno desta aplica√ß√£o e serve para fazer o isolamento entre camadas.

- **Controller:** Pattern utilizado nesta aplica√ß√£o para receber as requisi√ß√µes (input) e interagir com as camadas internas da aplica√ß√£o a fim de gerar o resultado e enviar uma resposta ao requisitante.

- **Repository:** Patters utilizado para fazer o trabalho de persist√™ncia de dados, interagindo com a camada de¬†banco¬†de¬†dados.

---

## üìù **Licen√ßa**

Este projeto est√° sob a licen√ßa **MIT**.

---

üë®‚Äçüíª **Desenvolvido por [Maxwell R Barboza](https://github.com/maxwelllbarboza)**
